
# Sessão 2 – Docker para Aplicações Django

## Objetivo da sessão
- Construir um Dockerfile completo para Django.
- Rodar Django via container.
- Trabalhar com volumes.
- Usar variáveis de ambiente.

---

## 1. Criando projeto Django
```bash
pip install django==4.2.7
django-admin startproject myproject .
```

---

## 2. requirements.txt
```txt
Django==4.2.7
psycopg2-binary==2.9.9
python-decouple==3.8
gunicorn==21.2.0
```

---

## 3. .dockerignore
```txt
__pycache__
*.pyc
env/
venv/
.git
*.sqlite3
```

---

## 4. Dockerfile para Django
```dockerfile
FROM python:3.11-slim
ENV PYTHONDONTWRITEBYTECODE=1     PYTHONUNBUFFERED=1
WORKDIR /app
RUN apt-get update && apt-get install -y     build-essential libpq-dev     && rm -rf /var/lib/apt/lists/*
COPY requirements.txt .
RUN pip install --upgrade pip && pip install --no-cache-dir -r requirements.txt
COPY . .
EXPOSE 8000
CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]
```

---

## 5. Executando Django
### Build
```bash
docker build -t django-app .
```
### Run
```bash
docker run -p 8000:8000 django-app
```

---

## 6. Volume para desenvolvimento
```bash
docker run -p 8000:8000 -v $(pwd):/app django-app
```

---

## 7. Variáveis de ambiente
### Executando com envs
```bash
docker run -p 8000:8000 -e DEBUG=True -e SECRET_KEY=abc django-app
```

---

## 8. Comandos Django no container
```bash
docker run django-app python manage.py migrate
docker run -it django-app python manage.py createsuperuser
```

---

## 9. Exercícios sugeridos
1. Criar view simples.
2. Testar DEBUG via variável de ambiente.
3. Executar migrations via container.
